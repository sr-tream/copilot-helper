{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://chp.dev/schemas/provider-config.schema.json",
    "title": "Copilot Helper Pro Provider Configuration",
    "type": "object",
    "required": ["displayName", "baseUrl", "apiKeyTemplate", "models"],
    "additionalProperties": false,
    "properties": {
        "displayName": {
            "type": "string",
            "minLength": 1,
            "description": "在提供商选择器中显示的用户友好名称。"
        },
        "baseUrl": {
            "type": "string",
            "format": "uri",
            "description": "OpenAI 兼容请求的基础 URL。"
        },
        "apiKeyTemplate": {
            "type": "string",
            "minLength": 16,
            "description": "指导用户预期 API 密钥格式的占位符模式。"
        },
        "models": {
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "#/$defs/model"
            },
            "description": "提供商公开的模型列表。"
        }
    },
    "$defs": {
        "capabilities": {
            "type": "object",
            "additionalProperties": false,
            "required": ["toolCalling", "imageInput"],
            "properties": {
                "toolCalling": {
                    "type": "boolean",
                    "description": "模型是否可以执行工具/函数调用。"
                },
                "imageInput": {
                    "type": "boolean",
                    "description": "模型是否接受图像输入。"
                }
            }
        },
        "model": {
            "type": "object",
            "additionalProperties": false,
            "required": ["id", "name", "tooltip", "maxInputTokens", "maxOutputTokens", "capabilities"],
            "properties": {
                "id": {
                    "type": "string",
                    "minLength": 1,
                    "description": "发送给提供商 API 的标识符。"
                },
                "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "在模型选择器中显示的名称。"
                },
                "tooltip": {
                    "type": "string",
                    "minLength": 1,
                    "description": "作为悬停工具提示显示的详细描述。"
                },
                "maxInputTokens": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "提供商接受的最大输入令牌数。"
                },
                "maxOutputTokens": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "提供商在单个响应中可以生成的最大令牌数。"
                },
                "version": {
                    "type": "string",
                    "minLength": 1,
                    "description": "可选的提供商特定版本标签。"
                },
                "capabilities": {
                    "$ref": "#/$defs/capabilities"
                },
                "provider": {
                    "type": "string",
                    "minLength": 1,
                    "description": "模型特定的提供商标识符。用于指定该模型使用的提供商进行API密钥查找，使得同一提供商下的不同模型可以使用不同的API密钥。"
                },
                "sdkMode": {
                    "type": "string",
                    "enum": ["openai", "anthropic"],
                    "default": "openai",
                    "description": "SDK模式选择：使用 OpenAI SDK 或 Anthropic SDK 处理请求。"
                },
                "baseUrl": {
                    "type": "string",
                    "format": "uri",
                    "description": "覆盖提供商默认的可选模型特定基础 URL。"
                },
                "model": {
                    "type": "string",
                    "minLength": 1,
                    "description": "当与 ID 不同时的可选请求模型名称。"
                },
                "outputThinking": {
                    "type": "boolean",
                    "description": "是否启用输出思考过程（如有支持）",
                    "default": true
                },
                "includeThinking": {
                    "type": "boolean",
                    "description": "多轮对话消息是否必须包含思考内容（可选）",
                    "default": false
                },
                "customHeader": {
                    "type": "object",
                    "description": "可选的自定义HTTP头部，将在API请求中附加。",
                    "additionalProperties": {
                        "type": "string",
                        "description": "HTTP头部值",
                        "minLength": 1
                    }
                },
                "extraBody": {
                    "type": "object",
                    "description": "额外的请求体参数，将在API请求中合并到请求体中",
                    "additionalProperties": {
                        "description": "额外的请求体参数值"
                    }
                }
            }
        }
    }
}
